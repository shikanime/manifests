apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
metadata:
  annotations:
    automata.shikanime.studio/images: '[ { "name": "caddy", "tag-regex": "(?i)^v?(?P<version>\\d+\\.\\d+\\.\\d+(?:-[0-9A-Za-z.-]+)?(?:\\+[0-9A-Za-z.-]+)?)$" }, { "name": "kratos", "tag-regex": "(?i)^v?(?P<version>\\d+\\.\\d+\\.\\d+(?:-[0-9A-Za-z.-]+)?(?:\\+[0-9A-Za-z.-]+)?)$" }, { "name": "kratos-postgres", "tag-regex": "(?i)^v?(?P<version>\\d+(?:\\.\\d+){0,2})$" }, { "name": "kratos-selfservice-ui-node", "tag-regex": "(?i)^v?(?P<version>\\d+\\.\\d+\\.\\d+(?:-[0-9A-Za-z.-]+)?(?:\\+[0-9A-Za-z.-]+)?)$" } ]'
images:
  - name: caddy
    newName: docker.io/library/caddy
    newTag: 2.10.2
  - name: kratos
    newName: docker.io/oryd/kratos
    newTag: v1.3.1
  - name: kratos-postgres
    newName: docker.io/library/postgres
    newTag: "18.0"
  - name: kratos-selfservice-ui-node
    newName: docker.io/oryd/kratos-selfservice-ui-node
    newTag: v1.3.1
resources:
  - deploy.yaml
  - ingress.yaml
  - pvc.yaml
  - sts.yaml
  - svc.yaml
  - vpa.yaml
labels:
  - pairs:
      app.kubernetes.io/component: identity-manager
      app.kubernetes.io/name: kratos
      app.kubernetes.io/part-of: nishir-security
      app.kubernetes.io/version: v1.3.1
