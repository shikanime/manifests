apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: nishir-matrix
spec:
  statefulSet:
    pod:
      affinity:
        podAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: matrix
              namespaceSelector:
                - shikanime
              topologyKey: kubernetes.io/hostname
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: nishir-matrix-googlechat
spec:
  statefulSet:
    pod:
      affinity:
        podAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: matrix-googlechat
              namespaceSelector:
                - shikanime
              topologyKey: kubernetes.io/hostname
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: nishir-matrix-slack
spec:
  statefulSet:
    pod:
      affinity:
        podAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchLabels:
                  app.kubernetes.io/name: matrix-slack
              namespaceSelector:
                - shikanime
              topologyKey: kubernetes.io/hostname
