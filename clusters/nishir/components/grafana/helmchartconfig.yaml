apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: grafana-monitoring
  namespace: kube-system
spec:
  valuesContent: |-
    cluster:
      name: nishir
    clusterMetrics:
      enabled: true
      kube-state-metrics:
        deploy: true
      node-exporter:
        deploy: true
        enabled: true
      opencost:
        enabled: true
        opencost:
          exporter:
            defaultClusterId: nishir
        metricsSource: metricsService
      kepler:
        enabled: false
    alloy-metrics:
      enabled: true
    clusterEvents:
      enabled: true
    alloy-singleton:
      enabled: true
    podLogs:
      enabled: true
    alloy-logs:
      enabled: true
    applicationObservability:
      enabled: true
      receivers:
        otlp:
          includeDebugMetrics: true
          grpc:
            enabled: true
          http:
            enabled: true
        zipkin:
          enabled: true
          includeDebugMetrics: true
    alloy-receiver:
      enabled: true
    annotationAutodiscovery:
      enabled: true
    prometheusOperatorObjects:
      enabled: true
      crds:
        deploy: true
    integrations:
      alloy:
        instances:
          - name: alloy
            labelSelectors:
              app.kubernetes.io/name:
                - alloy-metrics
                - alloy-singleton
                - alloy-logs
                - alloy-receiver
            metrics:
              tuning:
                useDefaultAllowList: true
                includeMetrics:
                  - alloy_build_info
