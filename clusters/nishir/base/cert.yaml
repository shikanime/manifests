apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: nishir-ca
  namespace: shikanime
spec:
  isCA: true
  commonName: nishir-ca
  secretName: nishir-ca
  issuerRef:
    kind: Issuer
    name: nishir-selfsigned
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: jellyfin-tls
  namespace: shikanime
spec:
  commonName: jellyfin
  dnsNames:
    - jellyfin
    - nishir.local
  issuerRef:
    kind: Issuer
    name: nishir-ca
  secretName: jellyfin-tls
  keystores:
    pkcs12:
      create: true
      passwordSecretRef:
        name: jellyfin-pkcs12
        key: password
      profile: Modern2023
  usages:
    - digital signature
    - key encipherment
    - server auth
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: gitea-tls
  namespace: shikanime
spec:
  commonName: gitea
  dnsNames:
    - gitea
    - nishir.local
  issuerRef:
    kind: Issuer
    name: nishir-ca
  secretName: gitea-tls
  keystores:
    pkcs12:
      create: true
      passwordSecretRef:
        name: gitea-pkcs12
        key: password
      profile: Modern2023
  usages:
    - digital signature
    - key encipherment
    - server auth
